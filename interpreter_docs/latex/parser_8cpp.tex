\doxysection{interpreter/src/parser.cpp File Reference}
\hypertarget{parser_8cpp}{}\label{parser_8cpp}\index{interpreter/src/parser.cpp@{interpreter/src/parser.cpp}}


Parser implementation for the Roscript interpreter.  


{\ttfamily \#include "{}parser.\+h"{}}\newline
{\ttfamily \#include "{}commons.\+cpp"{}}\newline
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_token}{Token}}
\item 
class \mbox{\hyperlink{class_token_stream}{Token\+Stream}}
\begin{DoxyCompactList}\small\item\em A class to handle the tokens generated by the lexer. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{parser_8cpp_a2a0808f60fdfec6ec2a48eebe65e8e8e}{get\+\_\+precedence}} (const string \&op)
\item 
\mbox{\hyperlink{class_expr}{Expr}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{parser_8cpp_afd6d67d6b3fc8a49748eb378f97c5406}{parse\+\_\+expression}} (const vector$<$ \mbox{\hyperlink{struct_token}{Token}} $>$ \&tokens, int \&idx)
\item 
\mbox{\hyperlink{class_expr}{Expr}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{parser_8cpp_a54874bb013aaa44b4222a58ae033aec4}{parse\+\_\+primary\+\_\+expression}} (const vector$<$ \mbox{\hyperlink{struct_token}{Token}} $>$ \&tokens, int \&idx)
\item 
\mbox{\hyperlink{class_expr}{Expr}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{parser_8cpp_a2c91c89fa62a120b8b14906f2f8f6682}{parse\+\_\+rhs\+\_\+expression}} (int expr\+\_\+prec, \mbox{\hyperlink{class_expr}{Expr}} \texorpdfstring{$\ast$}{*}lhs, const vector$<$ \mbox{\hyperlink{struct_token}{Token}} $>$ \&tokens, int \&idx)
\item 
void \mbox{\hyperlink{parser_8cpp_a87aa0a650e23a5ef1d6d49e8f96d84e2}{report\+\_\+error}} (const string \&msg, const string \&line, int line\+\_\+nb)
\item 
void \mbox{\hyperlink{parser_8cpp_a31c952782cd78bd4e4f9bd10198c392e}{parse\+\_\+variable\+\_\+declaration}} (const vector$<$ \mbox{\hyperlink{struct_token}{Token}} $>$ \&tokens, int \&idx)
\item 
void \mbox{\hyperlink{parser_8cpp_a6d3fb2d2181c474434080d67162361c5}{parse\+\_\+assignment\+\_\+statement}} (const vector$<$ \mbox{\hyperlink{struct_token}{Token}} $>$ \&tokens, int \&idx)
\item 
void \mbox{\hyperlink{parser_8cpp_a1110a303b21bcebfcf2ead47c6c8d585}{parse\+\_\+print\+\_\+statement}} (const vector$<$ \mbox{\hyperlink{struct_token}{Token}} $>$ \&tokens, int \&idx)
\item 
void \mbox{\hyperlink{parser_8cpp_ac44abe42f42809a6b0cab77804e2e530}{parse\+\_\+input\+\_\+statement}} (const vector$<$ \mbox{\hyperlink{struct_token}{Token}} $>$ \&tokens, int \&idx)
\item 
vector$<$ \mbox{\hyperlink{class_a_s_t_node}{ASTNode}} \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{parser_8cpp_a12b84fd1ea6d60d6367de33d15d60e98}{parse}} (vector$<$ pair$<$ string, string $>$ $>$ tokens)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
vector$<$ \mbox{\hyperlink{class_a_s_t_node}{ASTNode}} \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{parser_8cpp_aa91729509b343d89460ba38a9422ecc5}{AST}}
\item 
vector$<$ string $>$ \mbox{\hyperlink{parser_8cpp_a179075d4b3d4e19d5467a1b962c0adf4}{parser\+\_\+variables}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Parser implementation for the Roscript interpreter. 

This file contains the implementation of the parser for the Roscript interpreter. It includes functions to parse expressions, variable declarations, and error handling. It\textquotesingle{}s header contains the definitions of the AST nodes and the parser functions. \begin{DoxySeeAlso}{See also}
\doxylink{parser_8h}{parser.\+h}
\end{DoxySeeAlso}
IMPORTANT This is the description of the parse\+\_\+rhs\+\_\+expression function, which is the core of the parser. It handles operator precedence and associativity, and recursively parses right-\/hand side expressions. 

\begin{DoxyAuthor}{Author}
Rares-\/\+Cosma 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2025-\/04-\/25 
\end{DoxyDate}


\doxysubsection{Function Documentation}
\Hypertarget{parser_8cpp_a2a0808f60fdfec6ec2a48eebe65e8e8e}\index{parser.cpp@{parser.cpp}!get\_precedence@{get\_precedence}}
\index{get\_precedence@{get\_precedence}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{get\_precedence()}{get\_precedence()}}
{\footnotesize\ttfamily \label{parser_8cpp_a2a0808f60fdfec6ec2a48eebe65e8e8e} 
int get\+\_\+precedence (\begin{DoxyParamCaption}\item[{const string \&}]{op}{}\end{DoxyParamCaption})}

\Hypertarget{parser_8cpp_a12b84fd1ea6d60d6367de33d15d60e98}\index{parser.cpp@{parser.cpp}!parse@{parse}}
\index{parse@{parse}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{parse()}{parse()}}
{\footnotesize\ttfamily \label{parser_8cpp_a12b84fd1ea6d60d6367de33d15d60e98} 
vector$<$ \mbox{\hyperlink{class_a_s_t_node}{ASTNode}} \texorpdfstring{$\ast$}{*} $>$ parse (\begin{DoxyParamCaption}\item[{vector$<$ pair$<$ string, string $>$ $>$}]{tokens}{}\end{DoxyParamCaption})}

Parses the tokens and creates the AST. 
\begin{DoxyParams}{Parameters}
{\em tokens} & The tokens to parse. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The AST. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
This function is the main entry point for the parser. It takes the tokens generated by the lexer and creates the AST.
\end{DoxyNote}
\Hypertarget{parser_8cpp_a6d3fb2d2181c474434080d67162361c5}\index{parser.cpp@{parser.cpp}!parse\_assignment\_statement@{parse\_assignment\_statement}}
\index{parse\_assignment\_statement@{parse\_assignment\_statement}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{parse\_assignment\_statement()}{parse\_assignment\_statement()}}
{\footnotesize\ttfamily \label{parser_8cpp_a6d3fb2d2181c474434080d67162361c5} 
void parse\+\_\+assignment\+\_\+statement (\begin{DoxyParamCaption}\item[{const vector$<$ \mbox{\hyperlink{struct_token}{Token}} $>$ \&}]{tokens}{, }\item[{int \&}]{idx}{}\end{DoxyParamCaption})}

Parses a print statement line. 
\begin{DoxyParams}{Parameters}
{\em tokens} & The tokens to parse. \\
\hline
{\em idx} & Current token index. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Adds the print statement to the AST.
\end{DoxyReturn}
\Hypertarget{parser_8cpp_afd6d67d6b3fc8a49748eb378f97c5406}\index{parser.cpp@{parser.cpp}!parse\_expression@{parse\_expression}}
\index{parse\_expression@{parse\_expression}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{parse\_expression()}{parse\_expression()}}
{\footnotesize\ttfamily \label{parser_8cpp_afd6d67d6b3fc8a49748eb378f97c5406} 
\mbox{\hyperlink{class_expr}{Expr}} \texorpdfstring{$\ast$}{*} parse\+\_\+expression (\begin{DoxyParamCaption}\item[{const vector$<$ \mbox{\hyperlink{struct_token}{Token}} $>$ \&}]{tokens}{, }\item[{int \&}]{idx}{}\end{DoxyParamCaption})}

Parses an expression and returns the corresponding AST node. 
\begin{DoxyParams}{Parameters}
{\em tokens} & The tokens to parse. \\
\hline
{\em idx} & The current index in the tokens vector. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The parsed expression as an AST node.
\end{DoxyReturn}
\Hypertarget{parser_8cpp_ac44abe42f42809a6b0cab77804e2e530}\index{parser.cpp@{parser.cpp}!parse\_input\_statement@{parse\_input\_statement}}
\index{parse\_input\_statement@{parse\_input\_statement}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{parse\_input\_statement()}{parse\_input\_statement()}}
{\footnotesize\ttfamily \label{parser_8cpp_ac44abe42f42809a6b0cab77804e2e530} 
void parse\+\_\+input\+\_\+statement (\begin{DoxyParamCaption}\item[{const vector$<$ \mbox{\hyperlink{struct_token}{Token}} $>$ \&}]{tokens}{, }\item[{int \&}]{idx}{}\end{DoxyParamCaption})}

Parses a input statement line. 
\begin{DoxyParams}{Parameters}
{\em tokens} & The tokens to parse. \\
\hline
{\em idx} & Current token index. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Adds the input statement to the AST.
\end{DoxyReturn}
\Hypertarget{parser_8cpp_a54874bb013aaa44b4222a58ae033aec4}\index{parser.cpp@{parser.cpp}!parse\_primary\_expression@{parse\_primary\_expression}}
\index{parse\_primary\_expression@{parse\_primary\_expression}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{parse\_primary\_expression()}{parse\_primary\_expression()}}
{\footnotesize\ttfamily \label{parser_8cpp_a54874bb013aaa44b4222a58ae033aec4} 
\mbox{\hyperlink{class_expr}{Expr}} \texorpdfstring{$\ast$}{*} parse\+\_\+primary\+\_\+expression (\begin{DoxyParamCaption}\item[{const vector$<$ \mbox{\hyperlink{struct_token}{Token}} $>$ \&}]{tokens}{, }\item[{int \&}]{idx}{}\end{DoxyParamCaption})}

Parses the simplest elements of an expression (literals and variable references). 
\begin{DoxyParams}{Parameters}
{\em tokens} & The tokens to parse. \\
\hline
{\em idx} & The current index in the tokens vector. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The coresponding derived expression.
\end{DoxyReturn}
\Hypertarget{parser_8cpp_a1110a303b21bcebfcf2ead47c6c8d585}\index{parser.cpp@{parser.cpp}!parse\_print\_statement@{parse\_print\_statement}}
\index{parse\_print\_statement@{parse\_print\_statement}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{parse\_print\_statement()}{parse\_print\_statement()}}
{\footnotesize\ttfamily \label{parser_8cpp_a1110a303b21bcebfcf2ead47c6c8d585} 
void parse\+\_\+print\+\_\+statement (\begin{DoxyParamCaption}\item[{const vector$<$ \mbox{\hyperlink{struct_token}{Token}} $>$ \&}]{tokens}{, }\item[{int \&}]{idx}{}\end{DoxyParamCaption})}

Parses a print statement line. 
\begin{DoxyParams}{Parameters}
{\em tokens} & The tokens to parse. \\
\hline
{\em idx} & Current token index. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Adds the print statement to the AST.
\end{DoxyReturn}
\Hypertarget{parser_8cpp_a2c91c89fa62a120b8b14906f2f8f6682}\index{parser.cpp@{parser.cpp}!parse\_rhs\_expression@{parse\_rhs\_expression}}
\index{parse\_rhs\_expression@{parse\_rhs\_expression}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{parse\_rhs\_expression()}{parse\_rhs\_expression()}}
{\footnotesize\ttfamily \label{parser_8cpp_a2c91c89fa62a120b8b14906f2f8f6682} 
\mbox{\hyperlink{class_expr}{Expr}} \texorpdfstring{$\ast$}{*} parse\+\_\+rhs\+\_\+expression (\begin{DoxyParamCaption}\item[{int}]{expr\+\_\+prec}{, }\item[{\mbox{\hyperlink{class_expr}{Expr}} \texorpdfstring{$\ast$}{*}}]{lhs}{, }\item[{const vector$<$ \mbox{\hyperlink{struct_token}{Token}} $>$ \&}]{tokens}{, }\item[{int \&}]{idx}{}\end{DoxyParamCaption})}

Parses right-\/hand expression. 
\begin{DoxyParams}{Parameters}
{\em expr\+\_\+prec} & The current expression precedence. \\
\hline
{\em lhs} & The left-\/hand side expression. \\
\hline
{\em tokens} & The tokens to parse. \\
\hline
{\em idx} & The current index in the tokens vector. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
This function is the core to our parser, because it handles the precedence of the operators and the associativity. It is recursive and will call itself to parse the right-\/hand side expression. 
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
\doxylink{class_binary_expr}{Binary\+Expr} combining the left and right expressions.
\end{DoxyReturn}
\Hypertarget{parser_8cpp_a31c952782cd78bd4e4f9bd10198c392e}\index{parser.cpp@{parser.cpp}!parse\_variable\_declaration@{parse\_variable\_declaration}}
\index{parse\_variable\_declaration@{parse\_variable\_declaration}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{parse\_variable\_declaration()}{parse\_variable\_declaration()}}
{\footnotesize\ttfamily \label{parser_8cpp_a31c952782cd78bd4e4f9bd10198c392e} 
void parse\+\_\+variable\+\_\+declaration (\begin{DoxyParamCaption}\item[{const vector$<$ \mbox{\hyperlink{struct_token}{Token}} $>$ \&}]{tokens}{, }\item[{int \&}]{idx}{}\end{DoxyParamCaption})}

Parses a variable declaration line. 
\begin{DoxyParams}{Parameters}
{\em tokens} & The tokens to parse. \\
\hline
{\em idx} & Current token index. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Adds the variable declaration to the AST. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Because "{}var"{} is not a type spefcific keyword, we cannot determine the type of the variable, in case it has no initializer so we add it to the NDT stack (non determined) and relocate it later.
\end{DoxyNote}
\Hypertarget{parser_8cpp_a87aa0a650e23a5ef1d6d49e8f96d84e2}\index{parser.cpp@{parser.cpp}!report\_error@{report\_error}}
\index{report\_error@{report\_error}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{report\_error()}{report\_error()}}
{\footnotesize\ttfamily \label{parser_8cpp_a87aa0a650e23a5ef1d6d49e8f96d84e2} 
void report\+\_\+error (\begin{DoxyParamCaption}\item[{const string \&}]{msg}{, }\item[{const string \&}]{line}{, }\item[{int}]{line\+\_\+nb}{}\end{DoxyParamCaption})}

Thows custom syntax errors. 
\begin{DoxyParams}{Parameters}
{\em line} & The line of the error. \\
\hline
{\em line\+\_\+nb} & The line number in the source code. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Prints the error message and the line of code.
\end{DoxyReturn}


\doxysubsection{Variable Documentation}
\Hypertarget{parser_8cpp_aa91729509b343d89460ba38a9422ecc5}\index{parser.cpp@{parser.cpp}!AST@{AST}}
\index{AST@{AST}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{AST}{AST}}
{\footnotesize\ttfamily \label{parser_8cpp_aa91729509b343d89460ba38a9422ecc5} 
vector$<$\mbox{\hyperlink{class_a_s_t_node}{ASTNode}}\texorpdfstring{$\ast$}{*}$>$ AST}

\Hypertarget{parser_8cpp_a179075d4b3d4e19d5467a1b962c0adf4}\index{parser.cpp@{parser.cpp}!parser\_variables@{parser\_variables}}
\index{parser\_variables@{parser\_variables}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{parser\_variables}{parser\_variables}}
{\footnotesize\ttfamily \label{parser_8cpp_a179075d4b3d4e19d5467a1b962c0adf4} 
vector$<$string$>$ parser\+\_\+variables}

